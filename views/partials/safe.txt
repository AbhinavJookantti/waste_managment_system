<!DOCTYPE html>
<html lang="en">
<head>
    <title>Recycled Products</title>
    <!-- Add Razorpay SDK -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
            color: #333;
        }
        header {
            background-color: #232f3e;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        nav {
            background-color: #333;
            padding: 30px;
            text-align: center;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            margin: 0 10px;
        }
        main {
            padding: 20px;
        }
        footer {
            background-color: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        /* Unique Styles for Recycling Products */
        .product-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }
        .product-card {
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 300px;
        }
        .product-card img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .product-card h2 {
            font-size: 1.5rem;
            margin: 0;
        }
        .product-card p {
            color: #666;
            margin-bottom: 20px;
        }
        .add-to-cart {
            background-color: #fc605b;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .add-to-cart:hover {
            background-color: #fd8c87;
        }
        /* Cart Styles */
        .cart-container {
            position: fixed;
            top: 0;
            right: 0;
            width: 300px;
            background-color: #fff;
            border-left: 1px solid #ccc;
            height: 30%;
            overflow-y: auto;
            padding: 20px;
            display: none; /* Initially hidden */
        }
        .cart-header {
            margin-top: 0;
        }
        .cart-items {
            margin-bottom: 20px;
        }
        .cart-item {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-item button {
            background-color: #fc605b;
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .cart-item button:hover {
            background-color: #fd8c87;
        }
        .cart-total {
            font-weight: bold;
        }
        .checkout-btn {
            background-color: #fc605b;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
            transition: background-color 0.3s;
        }
        .checkout-btn:hover {
            background-color: #fd8c87;
        }

        /* Stylish Pop-up and Download Button */
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 30px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            border-radius: 8px;
            text-align: center;
        }
        .popup button {
            background-color: #4CAF50;
            color: white;
            padding: 15px 32px;
            text-align: center;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .popup button:hover {
            background-color: #45a049;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
         /* Optional styling */
         button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
<header>
    <h1>Recycled Products</h1>
</header>
<nav>
    <a href="/user/Home">Home</a>
    <a href="/user/RecycleProducts">Recycling Products</a>
    <a href="/user/SellTrash">Sell Waste</a>
    <a href="/user/BuyTrash">Buy Waste</a>
    <a href="/user/AboutWM">About Waste Management</a>
    <a href="/user/Service">Services</a>
    <a href="/user/Aboutus">About Us</a>
    <a href="/user/Typeswaste">Types of Waste</a>
</nav>
<main>
    <div class="product-container">
        <!-- Product Cards -->
        <!-- Add your product cards here -->
        <div class="product-container">
            <div class="product-card" style="background-color: #f3d250;">
                <img src="/images/Products/bootles.webp" alt="Bottles">
                <h2>Bottles</h2>
                <p>Description of Product 1.</p>
                <p>Price: ₹299</p>
                <button class="add-to-cart" onclick="addToCart('Bottles', 1)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #70e4ef;">
                <img src="/images/Products/glass conatiner.webp" alt="Glass conatiner">
                <h2>Glass Container</h2>
                <p>Description of Product 2.</p>
                <p>Price: ₹299</p>
                <button class="add-to-cart" onclick="addToCart('Glass Container', 299)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #f3d250;">
                <img src="/images/Products/til3.jpg" alt="Bottles">
                <h2>Tiles</h2>
                <p>Description of Product 1.</p>
                <p>Price: ₹499</p>
                <button class="add-to-cart" onclick="addToCart('Bottles', 1)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #50cdf3;">
                <img src="/images/Products/bateery.jpg" alt="Bottles">
                <h2>Battery</h2>
                <p>Description of Product 1.</p>
                <p>Price: ₹199</p>
                <button class="add-to-cart" onclick="addToCart('Bottles', 1)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #f3d250;">
                <img src="/images/Products/tile2.webp" alt="Bottles">
                <h2>Tiles</h2>
                <p>Description of Product 1.</p>
                <p>Price: ₹599</p>
                <button class="add-to-cart" onclick="addToCart('Bottles', 1)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #70e4ef;">
                <img src="/images/Products/coniron.webp" alt="Glass conatiner">
                <h2>Iron Rods</h2>
                <p>Description of Product 2.</p>
                <p>Price: ₹999/kg</p>
                <button class="add-to-cart" onclick="addToCart('Glass Container', 299)">Add to Cart</button>
            </div>
            <!-- Add more product cards here -->
            <!-- Add more product cards here -->
            <div class="product-card" style="background-color: #ff9f7c;">
                <img src="/images/Products/iron rods.jpeg" alt="Iron Rods">
                <h2>Iron Rods</h2>
                <p>Description of Product 3.</p>
                <p>Price: ₹400/kg</p>
                <button class="add-to-cart" onclick="addToCart('Iron Rods', 400)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #75e395;">
                <img src="/images/Products/kitchen.jpeg" alt="Utensils">
                <h2>Utensils</h2>
                <p>Description of Product 4.</p>
                <p>Price: ₹299</p>
                <button class="add-to-cart" onclick="addToCart('Utensils', 299)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #ff7eb9;">
                <img src="/images/Products/paperbag.jpeg" alt="Paper Bags">
                <h2>Paper Bag</h2>
                <p>Description of Product 5.</p>
                <p>Price: ₹30</p>
                <button class="add-to-cart" onclick="addToCart('Paper Bag', 30)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #9cd4e6;">
                <img src="/images/Products/manur.jpeg" alt="Organic manure">
                <h2>Organic Manure</h2>
                <p>Description of Product 6.</p>
                <p>Price: ₹100</p>
                <button class="add-to-cart" onclick="addToCart('Organic Manure', 100)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #ffada9;">
                <img src="/images/Products/studytable.jpg" alt="Study Table">
                <h2>Study Table</h2>
                <p>Description of Product 7.</p>
                <p>Price: ₹100</p>
                <button class="add-to-cart" onclick="addToCart('Study Table', 100)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #7fef70;">
                <img src="/images/Products/solarpaneel.jpg" alt="Glass conatiner">
                <h2>Solar Panels</h2>
                <p>Description of Product 2.</p>
                <p>Price: ₹700</p>
                <button class="add-to-cart" onclick="addToCart('Glass Container', 299)">Add to Cart</button>
            </div>
            <div class="product-card" style="background-color: #70e4ef;">
                <img src="/images/Products/solarp.jpg" alt="Glass conatiner">
                <h2>Solar Panels</h2>
                <p>Description of Product 2.</p>
                <p>Price: ₹700</p>
                <button class="add-to-cart" onclick="addToCart('Glass Container', 299)">Add to Cart</button>
            </div>
        </div>
    </div>
</main>
<footer>
    <p style="color: rgb(229, 255, 0)">&copy; 2024 Waste Management System. All rights reserved.</p>
</footer>
 
<div class="cart-container">
    <h2 class="cart-header">Shopping Cart</h2>
    <div class="cart-items" id="cart-items">
        <!-- Cart items will be dynamically added here -->
        
    </div>
    <p class="cart-total">Total: ₹<span id="cart-total">0</span></p>

    <!-- Input fields for name and delivery address -->
    <input type="text" id="name" placeholder="Enter Your Name">
    <input type="text" id="street" placeholder="Street Address">
    <input type="text" id="city" placeholder="City">
    <input type="text" id="pincode" placeholder="Pincode">
    <input type="text" id="state" placeholder="State">

    <button class="checkout-btn" onclick="proceedToPayment()">Proceed to Payment</button>
</div>

<!-- Popup for Download Bill -->
<h1>Generate Payment Invoice</h1>
<button id="downloadButton">Download Invoice</button>




<script>
    var cart = [];

    function addToCart(productName, price) {
        cart.push({ name: productName, price: price });
        updateCartUI();
    }

    function updateCartUI() {
        var cartItemsElement = document.getElementById('cart-items');
        var cartTotalElement = document.getElementById('cart-total');
        var total = 0;
        cartItemsElement.innerHTML = '';
        cart.forEach(function(item, index) {
            total += item.price;
            var cartItemElement = document.createElement('div');
            cartItemElement.classList.add('cart-item');
            cartItemElement.textContent = item.name + ' - ₹' + item.price;
            cartItemsElement.appendChild(cartItemElement);
        });
        cartTotalElement.textContent = total;
        document.querySelector('.cart-container').style.display = 'block';
    }

    function proceedToPayment() {
        var name = document.getElementById('name').value;
        var street = document.getElementById('street').value;
        var city = document.getElementById('city').value;
        var pincode = document.getElementById('pincode').value;
        var state = document.getElementById('state').value;

        // Ensure name and address are provided
        if (name.trim() === '' || street.trim() === '' || city.trim() === '' || pincode.trim() === '' || state.trim() === '') {
            alert('Please provide your name and complete address.');
            return;
        }

        // Calculate total amount
        var totalAmount = 0;
        cart.forEach(function(item) {
            totalAmount += item.price;
        });

        // Hide the "Proceed to Payment" button
        document.querySelector('.checkout-btn').style.display = 'none';

        // Proceed to payment using Razorpay
        var options = {
            "key": "rzp_test_6NrSFcJVLSBG4u",
            "amount": totalAmount * 100,
            "currency": "INR",
            "name": "EcoInfinite Nexus",
            "description": "Payment for Buy Trash",
            "image": "/images/logo.png", // Replace with actual logo image path
            "handler": function (response) {
                // Handle successful payment here
                alert("Payment successful!");
                var order_id = response.razorpay_payment_id;

                // Generate Bill as PDF
                generateBillAsPDF(order_id, name, street, city, pincode, state, totalAmount);

                // Show the Popup after payment
                document.getElementById("overlay").style.display = "block";
                document.getElementById("popup").style.display = "block";
            },
            "prefill": {
                "name": "name",
                "email": "your_email@example.com",
                "contact": "Your Contact Number"
            },
            "theme": {
                "color": "#3399cc"
            }
        };
        var rzp = new Razorpay(options);
        rzp.open();
    }

    // Function to generate the invoice as PDF
    function generateBillAsPDF(order_id, name, street, city, pincode, state, totalAmount) {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Add company logo
    const logoUrl = "/images/logo.png"; // Replace with your logo URL or base64 data
    const imgWidth = 50; // Width of the logo
    const imgHeight = 50; // Height of the logo
    doc.addImage(logoUrl, "PNG", 10, 10, imgWidth, imgHeight); // Add logo at (10, 10)

    // Add title
    const titleYPosition = 70; // Adjusted to avoid overlap with the logo
    doc.setFont("helvetica", "bold");
    doc.setFontSize(16);
    doc.text("Payment Invoice", 105, titleYPosition, null, null, "center");

    // Add a horizontal line
    const lineYPosition = titleYPosition + 5; // Adjusted to provide space below the title
    doc.setLineWidth(0.5); // Set the line thickness
    doc.setDrawColor(0, 0, 0); // Black color
    doc.line(10, lineYPosition, 200, lineYPosition); // Draw a horizontal line

    // User details
    doc.setFont("helvetica", "normal");
    doc.setFontSize(12);
    doc.text(`Order ID: ${order_id}`, 10, lineYPosition + 10);
    doc.text(`Customer Name: ${name}`, 10, lineYPosition + 20);
    doc.text(`Address:`, 10, lineYPosition + 30);
    doc.text(`${street},`, 10, lineYPosition + 40);
    doc.text(`${city}, ${state}, ${pincode}`, 10, lineYPosition + 50);

    // Add table-like structure for payment details
    const tableStartY = lineYPosition + 70;
    const tableWidth = 180;
    const rowHeight = 10;

    // Table header
    doc.setFont("helvetica", "bold");
    doc.text("Description", 20, tableStartY);
    doc.text("Amount", 150, tableStartY);

    // Table border and content
    doc.setFont("helvetica", "normal");
    doc.rect(10, tableStartY - 5, tableWidth, rowHeight * 2); // Rectangle border for the table

    // Add data to the table
    doc.text("Total Amount Paid:", 20, tableStartY + rowHeight);
    doc.text(`₹${totalAmount}`, 150, tableStartY + rowHeight);

    // Add a horizontal line below the table
    const lineAfterTable = tableStartY + (rowHeight * 2) + 5;
    doc.line(10, lineAfterTable, 200, lineAfterTable); // Draw a horizontal line

    // Date details
    doc.text(`Date: ${new Date().toLocaleString()}`, 10, lineAfterTable + 10);

    // Save the PDF
    doc.save(`Invoice_${order_id}.pdf`);
}


            // Example payment data
            const paymentData = {
                customerName: "John Doe",
                invoiceNumber: "INV12345",
                date: "2025-01-21",
                items: [
                    { description: "Product A", amount: 500.00, method: "Credit Card" },
                    { description: "Product B", amount: 200.00, method: "Debit Card" },
                    { description: "Service Charge", amount: 50.00, method: "UPI" }
                ]
            };

            // Trigger to download the bill
            document.getElementById("downloadButton").addEventListener("click", function() {
                downloadBill(paymentData);
            });


</script>

</body>
</html>
